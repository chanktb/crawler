<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Extractor TeeWorksUSA (Auto Run)</title>
<style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #f5f5f5; }
    h2 { color: #333; }
    .status { font-style: italic; color: gray; margin-bottom: 20px; }
    .product { margin-bottom: 30px; padding: 10px; background: white; border-radius: 5px; }
    .product img { max-width: 700px; height: auto; display: block; margin-bottom: 10px; }
    .title { font-weight: bold; font-size: 18px; }
</style>
</head>
<body>

<h2>Extractor sản phẩm TeeWorksUSA (Auto Run)</h2>
<div id="status" class="status">Vui lòng chờ, đang quét sản phẩm...</div>
<div id="output"></div>

<script>
(function() {
    const url = 'https://teeworksusa.com/';
    const proxyUrl = 'https://corsproxy.io/?' + encodeURIComponent(url);

    fetch(proxyUrl)
        .then(response => {
            if (!response.ok) throw new Error('Không thể tải trang (CORS hoặc lỗi mạng).');
            return response.text();
        })
        .then(html => {
            const parser = new DOMParser();
            const doc = parser.parseFromString(html, 'text/html');

            const startDiv = doc.querySelector('div.posts-wrap.products-container.has-ccols.ccols-xl-4.ccols-md-3.ccols-sm-2.ccols-2.has-ccols-spacing');
            if (!startDiv) {
                document.getElementById('status').textContent = 'Không tìm thấy danh sách sản phẩm.';
                return;
            }

            const products = startDiv.querySelectorAll('li.product');
            let outputHTML = '';
            let index = 1;

            products.forEach(prod => {
                const imgTag = prod.querySelector('img');
                const titleTag = prod.querySelector('h2.woocommerce-loop-product__title');

                const imgSrc = imgTag ? imgTag.getAttribute('src') : '';
                const title = titleTag ? titleTag.textContent.trim() : 'Không có tiêu đề';

                outputHTML += `
                    <div class="product">
                        <div>#${index}</div>
                        ${imgSrc ? `<img src="${imgSrc}" alt="Product Image">` : ''}
                        <div class="title">${title}</div>
                    </div>
                `;
                index++;
            });

            document.getElementById('status').style.display = 'none';
            document.getElementById('output').innerHTML = outputHTML;
        })
        .catch(err => {
            document.getElementById('status').textContent = 'Lỗi: ' + err.message;
            console.error(err);
        });
})();
</script>

</body>
</html>
