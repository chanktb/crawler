<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Extractor TeeWorksUSA (Upload File)</title>
<style>
    body { font-family: Arial, sans-serif; padding: 20px; background: #f5f5f5; }
    h2 { color: #333; }
    .status { font-style: italic; color: gray; margin-bottom: 20px; }
    .product { margin-bottom: 30px; padding: 10px; background: white; border-radius: 5px; }
    .product img { max-width: 700px; height: auto; display: block; margin-bottom: 10px; }
    .title { font-weight: bold; font-size: 18px; }
</style>
</head>
<body>
<h1><a href="/crawler/">Danh sách tools</a></h1>
<h2>Extractor sản phẩm TeeWorksUSA (Upload File)</h2>
<p>Truy cập TeeWorksUSA sau đó chuột phải Save as, chọn Webpage html only, sau đó upload file bên dưới.</p>
<input type="file" id="fileInput" accept=".html,.htm">
<div id="status" class="status">Hãy chọn file HTML đã lưu từ trang web...</div>
<div id="output"></div>

<script>
document.getElementById('fileInput').addEventListener('change', function(e) {
    const file = e.target.files[0];
    if (!file) return;

    const reader = new FileReader();
    reader.onload = function(event) {
        const html = event.target.result;
        const parser = new DOMParser();
        const doc = parser.parseFromString(html, 'text/html');

        const container = doc.querySelector('div.posts-wrap.products-container.has-ccols.ccols-xl-4.ccols-md-3.ccols-sm-2.ccols-2.has-ccols-spacing');
        if (!container) {
            document.getElementById('status').textContent = 'Không tìm thấy danh sách sản phẩm.';
            return;
        }

        const products = container.querySelectorAll('div.porto-tb-item.product');
        let outputHTML = '';
        let index = 1;

        products.forEach(prod => {
            const imgTag = prod.querySelector('img');
            const titleTag = prod.querySelector('h3.porto-heading a');

            const imgSrc = imgTag ? imgTag.getAttribute('src') : '';
            const title = titleTag ? titleTag.textContent.trim() : 'Không có tiêu đề';

            outputHTML += `
                <div class="product">
                    <div>#${index}</div>
                    ${imgSrc ? `<img src="${imgSrc}" alt="Product Image">` : ''}
                    <div class="title">${title}</div>
                </div>
            `;
            index++;
        });

        document.getElementById('status').style.display = 'none';
        document.getElementById('output').innerHTML = outputHTML;
    };
    reader.readAsText(file);
});
</script>

</body>
</html>
